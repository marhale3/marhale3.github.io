---
layout: problem
difficulty: 65
title: "Spilling the beans"
problemId: 334
answer: -1
---

<p>In Plato's heaven, there exist an infinite number of bowls in a straight line.<br />
Each bowl either contains some or none of a finite number of beans.<br />
A child plays a game, which allows only one kind of move: removing two beans from any bowl, and putting one in each of the two adjacent bowls.<br /> The game ends when each bowl contains either one or no beans.</p>

<p>For example, consider two adjacent bowls containing 2 and 3 beans respectively, all other bowls being empty. The following eight moves will finish the game:</p>

<div align='center'><img src="{{ site.baseurl }}project/images/p334_beans.gif" /></div>

<p>You are given the following sequences:<br />
<table class="formula" style="margin-left:50px;">
<tr>
   <td>
      <var>t</var><sub><i>0</i></sub> = 123456.
   </td>
</tr></table>

<table class="formula" style="margin-left:50px;">
<tr>
   <td>
      <var>t</var><sub><i>i</i></sub> = 
   </td>
   <td><img src="{{ site.baseurl }}project/images/p334_cases.gif" /></td>
   <td>
   <table class="formula">
      <tr>
      <td></td>
      <td>
         <table class="frac">
         <tr><td><var>t</var><sub><i>i-1</i></sub></td></tr>
         <tr><td class="overline">2</td></tr>
         </table>
      </td>
      <td>
         ,
      </td>
      <td></td>
      <td>
         if <var>t</var><sub><i>i-1</i></sub> is even
      </td>
      </tr>
      <tr>
      <td><img src="{{ site.baseurl }}project/images/p334_lfloor.gif" /></td>
      <td>
         <table class="frac">
         <tr><td><var>t</var><sub><i>i-1</i></sub></td></tr>
         <tr><td class="overline">2</td></tr>
         </table>
      </td>
      <td>
         <img src="{{ site.baseurl }}project/images/p334_rfloor.gif" />
      </td>
      <td>
         926252, 
      </td>
      <td>
         if <var>t</var><sub><i>i-1</i></sub> is odd
      </td>
      </tr>
   </table>
   <td>
</tr>
<tr>
   <td></td>
   <td></td>
   <td>
      where &lfloor;<var>x</var>&rfloor; is the floor function
   </td>
</tr>
<tr>
   <td></td>
   <td></td>
   <td>
      and <img src="{{ site.baseurl }}project/images/p334_oplus.gif" /> is the bitwise XOR operator.
   </td>
</tr></table>

<table class="formula" style="margin-left:50px;">
<tr>
   <td>
      <var>b</var><sub><i>i</i></sub> = ( <var>t</var><sub><i>i</i></sub> mod 2<sup>11</sup>) + 1.
   </td>
</tr></table></p>

<p>The first two terms of the last sequence are <var>b</var><sub><i>1</i></sub> = 289 and <var>b</var><sub><i>2</i></sub> = 145.<br />
If we start with <var>b</var><sub><i>1</i></sub> and <var>b</var><sub><i>2</i></sub> beans in two adjacent bowls, 3419100 moves would be required to finish the game.</p>

<p>Consider now 1500 adjacent bowls containing <var>b</var><sub><i>1</i></sub>, <var>b</var><sub><i>2</i></sub>,..., <var>b</var><sub><i>1500</i></sub> beans respectively, all other bowls being empty. Find how many moves it takes before the game ends.</p>


